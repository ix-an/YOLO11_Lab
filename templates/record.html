<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“’ æ£€æµ‹è®°å½•</title>

    <!-- element-ui æ ·å¼ -->
    <link rel="stylesheet" href="../static/element-ui/lib/theme-chalk/index.css">
    <!-- vue -->
    <script src="../static/vue.js"></script>
    <!-- element-ui -->
    <script src="../static/element-ui/lib/index.js"></script>
    <!-- axios -->
    <script src="../static/axios/dist/axios.js"></script>

    <style>
        /* ===== é¡µé¢æ•´ä½“èƒŒæ™¯ï¼ˆè“è‰²è«å…°è¿ªï¼‰ ===== */
        body {
            margin: 0;
            padding: 0;
            background: #eef3f8; /* å†·é™ç°è“ */
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            color: #475569;
        }

        /* ===== é¡µé¢å®¹å™¨ï¼ˆæ”¾å®½ï¼Œä¸æŒ¤è¡¨æ ¼ï¼‰ ===== */
        .page-container {
            width: 95%;              /* æ”¾å®½ */
            max-width: 1600px;       /* é€‚åˆå¤§å± */
            margin: 28px auto;
            padding: 26px 28px 30px;
            background: #f9fbfd;     /* é›¾ç™½è“ */
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(30, 58, 138, 0.08);
        }

        /* ===== æ ‡é¢˜ ===== */
        .page-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .page-desc {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 22px;
        }

        /* ===== è¡¨æ ¼æ•´ä½“ ===== */
        .el-table {
            border-radius: 14px;
            overflow: hidden;
            font-size: 14px;
        }

        .el-table th {
            background: #f1f5fa;  /* è¡¨å¤´æµ…è“ç° */
            color: #475569;
            font-weight: 600;
        }

        .el-table td {
            padding: 12px 0;
        }

        /* hover æ›´å¹²å‡€ */
        .el-table--enable-row-hover .el-table__body tr:hover > td {
            background-color: #eaf1f9;
        }

        /* ===== è¡¨æ ¼å›¾ç‰‡ ===== */
        .table-img {
            height: 130px;
            width: 90%;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 6px 16px rgba(15, 23, 42, 0.12);
        }

        /* ===== åˆ†é¡µ ===== */
        .pagination-wrap {
            margin-top: 26px;
        }

        .el-pagination {
            font-size: 14px;
        }

        .el-pager li.active {
            background-color: #dbeafe;
            color: #1e3a8a;
            border-radius: 8px;
        }
    </style>
</head>

<body>
<div id="app">
    <div class="page-container">

        <div class="page-title">
            ğŸ“’ æ£€æµ‹è®°å½•
        </div>
        <div class="page-desc">
            è®°å½•ä½ çš„æ¯ä¸€æ¬¡æ£€æµ‹ç»“æœï¼Œæ”¯æŒå›çœ‹ä¸å¯¹æ¯”åˆ†æ
        </div>

        <el-table :data="tableData" stripe style="width: 100%">
            <el-table-column prop="id" label="ID" width="50" align="center"></el-table-column>

            <el-table-column label="åŸå›¾" width="300" align="center">
                <template slot-scope="scope">
                    <img
                        :src="'/' + scope.row.originUrl"
                        class="table-img"
                        alt="å›¾ç‰‡ä¸å­˜åœ¨"
                    />
                </template>
            </el-table-column>

            <el-table-column label="ç»“æœ" width="300" align="center">
                <template slot-scope="scope">
                    <img
                        :src="'/' + scope.row.resultUrl"
                        class="table-img"
                        alt="å›¾ç‰‡ä¸å­˜åœ¨"
                    />
                </template>
            </el-table-column>

            <el-table-column prop="conf" label="å¹³å‡ç½®ä¿¡åº¦" width="110" align="center"></el-table-column>
            <el-table-column prop="classesNumber" label="ç»“æœç»Ÿè®¡" width="350" align="center"></el-table-column>
            <el-table-column prop="username" label="æ£€æµ‹ç”¨æˆ·" width="100" align="center"></el-table-column>
            <el-table-column prop="createTime" label="æ£€æµ‹æ—¶é—´" align="center"></el-table-column>
        </el-table>

        <center class="pagination-wrap">
            <el-pagination
                @size-change="handleSizeChange"
                @current-change="handleCurrentChange"
                :current-page="page"
                :page-sizes="[5, 10, 20]"
                :page-size="size"
                layout="total, sizes, prev, pager, next, jumper"
                :total="total">
            </el-pagination>
        </center>

    </div>
</div>

<!-- Vue é€»è¾‘ï¼ˆå®Œå…¨æœªä¿®æ”¹ï¼‰ -->
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                tableData: [],
                page: 1,
                size: 5,
                total: 0,
            }
        },
        methods:{
            loadTableData() {
                axios({
                    method: "get",
                    url: "/queryRecords/",
                    params: {
                        page: this.page,
                        size: this.size,
                        username: sessionStorage.getItem("username")
                    }
                }).then(res => {
                    this.tableData = res.data.data.records;
                    this.total = res.data.data.total;
                })
            },
            handleSizeChange(val) {
                this.size = val;
                this.page = 1;
                this.loadTableData();
            },
            handleCurrentChange(val) {
                this.page = val;
                this.loadTableData();
            }
        },
        mounted() {
            this.loadTableData();
        },
    })
</script>
</body>
</html>
