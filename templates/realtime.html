<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“¡ å®æ—¶ç›‘æµ‹</title>

    <!-- Element-UI æ ·å¼ -->
    <link rel="stylesheet" href="../static/element-ui/lib/theme-chalk/index.css">
    <!-- Vue -->
    <script src="../static/vue.js"></script>
    <!-- Element-UI -->
    <script src="../static/element-ui/lib/index.js"></script>
    <!-- Axiosï¼ˆè™½ç„¶è¿™é‡Œæš‚æœªä½¿ç”¨ï¼Œä¿æŒç»Ÿä¸€ï¼‰ -->
    <script src="../static/axios/dist/axios.js"></script>

    <style>
        /* ===== é¡µé¢æ•´ä½“èƒŒæ™¯ï¼šè“è‰²è«å…°è¿ª ===== */
        body {
            margin: 0;
            height: 100vh;
            background: linear-gradient(135deg, #eaf1f9, #f6f9fc);
            font-family: "PingFang SC", "Helvetica Neue", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #475569;
        }

        /* ===== ä¸»å¡ç‰‡ ===== */
        .realtime-card {
            width: 820px;
            background: #ffffff;
            border-radius: 22px;
            padding: 34px 36px 30px;
            box-shadow: 0 18px 40px rgba(30, 58, 138, 0.12);
            text-align: center;
        }

        /* ===== æ ‡é¢˜ ===== */
        .title {
            font-size: 26px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .subtitle {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 22px;
        }

        /* ===== æ‘„åƒå¤´ç”»é¢ ===== */
        .camera-box {
            margin: 22px 0;
            border-radius: 16px;
            overflow: hidden;
            background: #f1f5fa;
            min-height: 260px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .camera-box img {
            width: 100%;
            border-radius: 16px;
        }

        .placeholder {
            color: #94a3b8;
            font-size: 14px;
        }

        /* ===== æŒ‰é’®åŒºåŸŸ ===== */
        .btn-group {
            margin-top: 20px;
        }

        .el-button {
            border-radius: 12px;
            padding: 12px 26px;
            font-size: 15px;
            font-weight: 500;
        }

        /* ===== çŠ¶æ€æç¤º ===== */
        .status-text {
            margin-top: 14px;
            font-size: 14px;
            color: #64748b;
        }
    </style>
</head>

<body>
<div id="app">
    <div class="realtime-card">
        <!-- æ ‡é¢˜ -->
        <div class="title">ğŸ“¡ å®æ—¶ç›‘æµ‹</div>
        <div class="subtitle">æ‘„åƒå¤´ç›®æ ‡æ£€æµ‹ Â· å®æ—¶åˆ†æä¸­ ğŸ‘€</div>

        <!-- æ‘„åƒå¤´ç”»é¢ -->
        <div class="camera-box">
            <img
                v-show="cameraDetectUrl"
                :src="cameraDetectUrl"
                alt="camera detect"
            />
            <div class="placeholder" v-show="!cameraDetectUrl">
                æš‚æœªå¼€å¯æ‘„åƒå¤´
            </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="btn-group">
            <el-button
                v-show="!isOpen"
                type="primary"
                @click="cameraDetect">
                æ‰“å¼€æ‘„åƒå¤´ â–¶
            </el-button>

            <el-button
                v-show="isOpen"
                type="danger"
                @click="cameraDetect">
                å…³é—­æ‘„åƒå¤´ â– 
            </el-button>
        </div>

        <!-- çŠ¶æ€è¯´æ˜ -->
        <div class="status-text" v-text="statusText"></div>
    </div>
</div>

<script>
    new Vue({
        el: "#app",
        data() {
            return {
                isOpen: false,          // æ‘„åƒå¤´çŠ¶æ€
                cameraDetectUrl: null,  // å®æ—¶æ£€æµ‹æµåœ°å€
            }
        },
        computed: {
            statusText() {
                return this.isOpen
            ? 'å®æ—¶ç›‘æµ‹ä¸­ï¼Œè¯·ä¿æŒé¡µé¢å¼€å¯'
            : 'ç‚¹å‡»æŒ‰é’®å¼€å§‹å®æ—¶æ£€æµ‹';
            }
        },
        methods: {
            /* ===============================
               æ‘„åƒå¤´å¼€å…³é€»è¾‘ï¼ˆåŸé€»è¾‘ä¿ç•™ï¼‰
            =============================== */
            cameraDetect() {
                this.isOpen = !this.isOpen;

                if (this.isOpen) {
                    this.cameraDetectUrl = "/detectCamera/?isOpen=true";
                } else {
                    this.cameraDetectUrl = "/detectCamera/?isOpen=false";
                    setTimeout(() => {
                        this.cameraDetectUrl = null;
                    }, 1500);
                }
            },

            /* ===============================
               å ä½æ–¹æ³•ï¼šç”¨äºæ¶ˆé™¤ iframe åœºæ™¯ä¸‹
               index.html é¡¶éƒ¨æŒ‰é’®çš„ Vue æŠ¥è­¦
            =============================== */
            handleLogout() {
                // è¿™é‡Œä¸åšä»»ä½•äº‹ï¼Œä»…ç”¨äºé˜²æ­¢ Vue è­¦å‘Š
            }
        }
    })
</script>
</body>
</html>
