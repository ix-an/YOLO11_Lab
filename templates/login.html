<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- ================= é¡µé¢åŸºç¡€é…ç½® ================= -->
    <meta charset="UTF-8">
    <!-- æµè§ˆå™¨æ ‡ç­¾é¡µæ ‡é¢˜ -->
    <title>ç™»å½•</title>

    <!-- ================= favicon é…ç½® ================= -->
    <!--
        æŒ‡å®šç½‘ç«™ faviconï¼ˆç½‘é¡µæ ‡ç­¾é¡µå·¦ä¾§å°å›¾æ ‡ï¼‰
        ä½¿ç”¨æœ¬åœ°å›¾æ ‡æ–‡ä»¶ï¼Œé¿å…æµè§ˆå™¨ç¼“å­˜ emoji favicon çš„é—®é¢˜
    -->
    <link rel="icon" href="../static/img/puppy.ico">

    <!-- ================= å‰ç«¯ä¾èµ–å¼•å…¥ ================= -->
    <!-- Element-UI æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="../static/element-ui/lib/theme-chalk/index.css">
    <!-- Vue.js æ ¸å¿ƒåº“ -->
    <script src="../static/vue.js"></script>
    <!-- Element-UI ç»„ä»¶åº“ -->
    <script src="../static/element-ui/lib/index.js"></script>
    <!-- Axiosï¼šç”¨äºå‰åç«¯ HTTP è¯·æ±‚ -->
    <script src="../static/axios/dist/axios.js"></script>

    <!-- ================= é¡µé¢æ ·å¼ ================= -->
    <style>
        /* é¡µé¢æ•´ä½“å¸ƒå±€ï¼šæ°´å¹³ + å‚ç›´å±…ä¸­ */
        body {
            margin: 0;
            height: 100vh;
            background: linear-gradient(135deg, #FFFDF8, #FFECEC);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: "Helvetica Neue", "PingFang SC", sans-serif;
        }

        /* ç™»å½•å¡ç‰‡å®¹å™¨ */
        .login-box {
            width: 380px;
            background: #ffffff;
            border-radius: 20px;
            padding: 36px 32px;
            box-shadow: 0 15px 35px rgba(255, 170, 170, 0.25);
            position: relative;
        }

        /* ç³»ç»Ÿä¸»æ ‡é¢˜ */
        .title {
            text-align: center;
            font-size: 22px;
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
        }

        /* å‰¯æ ‡é¢˜ / æè¿°ä¿¡æ¯ */
        .subtitle {
            text-align: center;
            font-size: 14px;
            color: #999;
            margin-bottom: 28px;
        }

        /* ç™»å½•æŒ‰é’®æ ·å¼ */
        .login-btn {
            width: 100%;
            background-color: #FF9AA2;
            border: none;
            border-radius: 12px;
        }

        /* ç™»å½•æŒ‰é’® hover æ•ˆæœ */
        .login-btn:hover {
            background-color: #FF7F8A;
        }

        /* Element-UI è¾“å…¥æ¡†åœ†è§’ç»Ÿä¸€ */
        .el-input__inner {
            border-radius: 12px;
        }
    </style>
</head>

<body>
<!-- ================= Vue åº”ç”¨æŒ‚è½½ç‚¹ ================= -->
<div id="app">
    <!-- ç™»å½•å¡ç‰‡ -->
    <div class="login-box">
        <!-- ç³»ç»Ÿåç§° -->
        <div class="title">YOLO Vision Lab ğŸ‘€</div>
        <!-- ç³»ç»Ÿç®€ä»‹ -->
        <div class="subtitle">ç›®æ ‡æ£€æµ‹ & å¤šæ¨¡æ€æ™ºèƒ½åˆ†æ</div>

        <!-- ================= ç™»å½•è¡¨å• ================= -->
        <!--
            el-formï¼šElement-UI è¡¨å•ç»„ä»¶
            :model="loginForm" ç»‘å®š Vue ä¸­çš„æ•°æ®å¯¹è±¡
        -->
        <el-form :model="loginForm">

            <!-- ç”¨æˆ·åè¾“å…¥æ¡† -->
            <el-form-item>
                <el-input
                        v-model="loginForm.username"
                        placeholder="ç”¨æˆ·å / Username"
                        prefix-icon="el-icon-user">
                </el-input>
            </el-form-item>

            <!-- å¯†ç è¾“å…¥æ¡† -->
            <el-form-item>
                <el-input
                        v-model="loginForm.password"
                        type="password"
                        placeholder="å¯†ç  / Password"
                        prefix-icon="el-icon-lock"
                        show-password>
                </el-input>
            </el-form-item>

            <!-- ç™»å½•æŒ‰é’® -->
            <el-form-item>
                <el-button
                        type="primary"
                        class="login-btn"
                        @click="handleLogin">
                    ç™»å½• Login âœ¨
                </el-button>
            </el-form-item>

        </el-form>
    </div>
</div>

<!-- ================= Vue å®ä¾‹é€»è¾‘ ================= -->
<script>
    new Vue({
        // ç»‘å®š Vue ç®¡ç†çš„ DOM èŒƒå›´
        el: '#app',

        // é¡µé¢æ•°æ®æ¨¡å‹
        data() {
            return {
                // ç™»å½•è¡¨å•æ•°æ®
                loginForm: {
                    username: '',
                    password: ''
                }
            }
        },

        // é¡µé¢æ–¹æ³•å®šä¹‰
        methods: {
            handleLogin() {
                let _this = this
                axios({
                    url: '/login/',
                    method: 'post',
                    // Axios ä¼ å¯¹è±¡å³å¯ï¼Œä¸å¿… JSON.stringifyï¼Œä¹Ÿä¸å¿…æ‰‹å†™ Content-Type
                    data: _this.loginForm,  // Axios è‡ªåŠ¨è½¬ jsonã€åŠ content-typeã€å¤„ç†å“åº”
                }).then(res => {
                    console.log(res.data.status, typeof res.data.status)
                    // status==200ï¼Œç™»é™†æˆåŠŸï¼Œè·³è½¬åˆ°é¦–é¡µï¼Œå¦åˆ™æç¤ºå¤±è´¥
                    let status = res.data.status;
                    let msg = res.data.msg;
                    // ä¸‰ä¸ªç­‰å·ï¼šå€¼ç›¸ç­‰ï¼Œç±»å‹ä¹Ÿå¾—ç›¸åŒ
                    if (status === 200) {
                        // ç™»å½•æˆåŠŸæç¤º
                        _this.$message.success(msg)

                        // å­˜å‚¨å½“å‰ç”¨æˆ·å
                        sessionStorage.setItem('username', _this.loginForm.username)

                        // å»¶æ—¶è·³è½¬åˆ°ä¸»é¡µé¢
                        setTimeout(() => {
                            window.location.href = '/index/'
                        }, 800)
                    } else {
                        // ç™»å½•å¤±è´¥æç¤º
                        _this.$message.error(msg)
                    }
                })
            }


        }
    })
</script>
</body>
</html>
