<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- ================= é¡µé¢åŸºç¡€é…ç½® ================= -->
    <meta charset="UTF-8">
    <title>YOLO Vision Lab</title>

    <!-- ================= favicon ================= -->
    <link rel="icon" href="../static/img/puppy.ico">

    <!-- ================= å‰ç«¯ä¾èµ– ================= -->
    <!-- Element-UI æ ·å¼ -->
    <link rel="stylesheet" href="../static/element-ui/lib/theme-chalk/index.css">
    <!-- Vue æ ¸å¿ƒ -->
    <script src="../static/vue.js"></script>
    <!-- Element-UI ç»„ä»¶ -->
    <script src="../static/element-ui/lib/index.js"></script>
    <!-- Axiosï¼ˆåç»­æ¥å£è°ƒç”¨ç”¨ï¼‰ -->
    <script src="../static/axios/dist/axios.js"></script>

    <!-- ================= é¡µé¢æ ·å¼ ================= -->
    <style>
        body {
            margin: 0;
            height: 100vh;
            background: linear-gradient(135deg, #FFFDF8, #FFECEC);
            font-family: "Helvetica Neue", "PingFang SC", sans-serif;
        }

        /* ================= é¡¶éƒ¨å¯¼èˆªæ  ================= */
        .header {
            height: 60px;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            box-shadow: 0 2px 8px rgba(255, 170, 170, 0.2);
        }

        .header-title {
            font-size: 18px;
            font-weight: 600;
            color: #444;
        }

        .header-user {
            font-size: 14px;
            color: #666;
        }

        /* ================= ä¸»ä½“å¸ƒå±€ ================= */
        .container {
            display: flex;
            height: calc(100vh - 60px);
        }

        /* ================= å·¦ä¾§èœå• ================= */
        .sidebar {
            width: 200px;
            background: #ffffff;
            padding-top: 20px;
            box-shadow: 2px 0 8px rgba(255, 170, 170, 0.15);
        }

        /* ================= å³ä¾§å†…å®¹åŒº ================= */
        .content {
            flex: 1;
            padding: 24px;
        }

        /* å³ä¾§å¡ç‰‡å®¹å™¨ï¼ˆiframe çš„å¤–å£³ï¼‰ */
        .content-card {
            background: #ffffff;
            border-radius: 20px;
            height: 100%;
            box-shadow: 0 15px 35px rgba(255, 170, 170, 0.25);
            overflow: hidden; /* ä¿è¯ iframe ä¸æº¢å‡ºåœ†è§’ */
        }

        /* iframe æœ¬èº« */
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>

<body>
<!-- ================= Vue åº”ç”¨æŒ‚è½½ç‚¹ ================= -->
<div id="app">

    <!-- ================= é¡¶éƒ¨çŠ¶æ€æ  ================= -->
    <div class="header">
        <!-- ç³»ç»Ÿåç§° -->
        <div class="header-title">
            YOLO Vision Lab ğŸ‘€
        </div>

        <!-- ç”¨æˆ·ä¿¡æ¯ & é€€å‡ºæŒ‰é’® -->
        <div class="header-user">
             ğŸˆï¸ [{ username }]
            <el-button type="text" style="margin-left: 12px; color: #FF9AA2;" @click="handleLogout">
                é€€å‡º
            </el-button>
        </div>
    </div>

    <!-- ================= ä¸»ä½“åŒºåŸŸ ================= -->
    <div class="container">

        <!-- ========== å·¦ä¾§åŠŸèƒ½èœå• ========== -->
        <div class="sidebar">
            <!--
                el-menuï¼šElement-UI èœå•ç»„ä»¶
                @selectï¼šç‚¹å‡»èœå•æ—¶è§¦å‘
            -->
            <el-menu
                :default-active="activeMenu"
                @select="handleMenuSelect"
                background-color="#ffffff"
                text-color="#666"
                active-text-color="#FF9AA2">

                <!-- æ¬¢è¿é¡µï¼ˆé»˜è®¤ï¼‰ -->
                <el-menu-item index="welcome">
                    ğŸŒ¸ æ¬¢è¿é¡µ
                </el-menu-item>

                <el-menu-item index="detect">
                    ğŸ›¸ å›¾ç‰‡æ£€æµ‹
                </el-menu-item>

                <el-menu-item index="record">
                    ğŸ“’ æ£€æµ‹è®°å½•
                </el-menu-item>

                <el-menu-item index="video">
                    ğŸ¬ è§†é¢‘æ£€æµ‹
                </el-menu-item>

                <el-menu-item index="realtime">
                    ğŸ“¡ å®æ—¶ç›‘æµ‹
                </el-menu-item>
            </el-menu>
        </div>

        <!-- ========== å³ä¾§ iframe å†…å®¹åŒº ========== -->
        <div class="content">
            <div class="content-card">
                <!--
                    iframe ç”¨äºåŠ è½½ä¸åŒåŠŸèƒ½é¡µé¢
                    åç»­åªéœ€è¦æ”¹ src æŒ‡å‘çš„åç«¯è·¯ç”±å³å¯
                -->
                <iframe :src="iframeSrc"></iframe>
            </div>
        </div>
    </div>
</div>

<!-- ================= Vue å®ä¾‹é€»è¾‘ ================= -->
<script>
    new Vue({
        el: '#app',
        delimiters: ['[{', '}]'],
        data() {
            return {
                // å½“å‰ç™»å½•ç”¨æˆ·åï¼ˆæ¥è‡ª login.html çš„ sessionStorageï¼‰
                username: '',
                // å½“å‰æ¿€æ´»èœå•
                activeMenu: 'welcome',
                // iframe é»˜è®¤é¡µé¢
                iframeSrc: '/welcome/'
            }
        },
        mounted() {
            this.username = sessionStorage.getItem('username') || 'Guest';
        },

        methods: {
            // å·¦ä¾§èœå•åˆ‡æ¢äº‹ä»¶
            handleMenuSelect(key) {
                this.activeMenu = key

                // èœå•ä¸ iframe é¡µé¢æ˜ å°„å…³ç³»
                const pageMap = {
                    welcome: '/welcome/',
                    detect: '/detect/',
                    record: '/record/',
                    video: '/video/',
                    realtime: '/realtime/'
                }

                // åˆ‡æ¢ iframe é¡µé¢
                this.iframeSrc = pageMap[key]
            }
        }
    })
</script>

</body>
</html>
